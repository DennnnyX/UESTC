# 卸载

  当前无人机边缘卸载的研究领域内，有大量不同的卸载策略，但是所有的这些卸载策略，最终的目标无非就是三个。

- 以降低延迟为目标

- 以节约能耗为目标

- 权衡能耗与延迟

    目前针对MEC 系统的大部分研究，是将系统模型中的能耗和延迟构建为一个联合
优化问题。

    当前以无人机为载体进行边缘计算，也有三种不同的架构。

- 第一种架构是无人机作为终端设备，需要执行自己的计算任务，但是由于无人机电池容量有限，它可能无法承受数据量庞大的计算任务。

- **第二种架构则是以无人机作为MEC 服务器**，在地面用户将计算任务转移给无人机后，帮助地面用户完成任务计算，这可能发生在没有地面MEC 网络的地区。

Cheng N, Xu W, Shi W, et al. Air-ground integrated mobile edge networks: Architecture, challenges,
and opportunities[J]. IEEE Communications Magazine, 2018, 56(8): 26-32.

Jeong S, Simeone O, Kang J. Mobile cloud computing with a UAV-mounted cloudlet: optimal bit
allocation for communication and computation[J]. IET Communications, 2017, 11(7): 969-974.

Jeong S, Simeone O, Kang J. Mobile edge computing via a UAV-mounted cloudlet: Optimization of
bit allocation and path planning[J]. IEEE Transactions on Vehicular Technology, 2017, 67(3):
2049-2063.

Zhou F, Wu Y, Hu R Q, et al. Computation rate maximization in UAV-enabled wireless-powered
mobile-edge computing systems[J]. IEEE Journal on Selected Areas in Communications, 2018, 36(9):
1927-1941.

- 在第三种架构中，无人机作为一个中继，帮助用户有效地将其计算任务转移到远端MEC 服务器。

**卸载流程图**

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-05-17-03-40-image.png)

- 搜索节点：根据终端设备所处网络环境，搜索移动用户周围可以提供服务的MEC 计算节
  点（无人机）

- 任务分析：根据终端设备计算任务的特点，分析任务是否能进行分割，如果可
  以，将是一个部分卸载问题，否则是一个完全卸载问题

- 卸载决策：对网络环境以及数据安全性进行分析，得出是否进行卸载的结论

- 资源分配：如果任务决定卸载到MEC 服务器，则进行计算资源的分配，使用资
  源分配算法分析用户任务的数据量和资源使用情况

- 任务计算：如果任务决定卸载到服务器，服务器在进行资源分配后将对任务进
  行计算、处理。如果没有选择卸载，任务将在移动终端进行本地计算

- 结果返回：边缘服务器完成计算任务后将结果回传至终端用户

## 卸载决策

    目前，从移动设备到无人机的计算卸载决策可分成为二进制卸载，部分卸载和协同卸载。

- **二进制卸载** ：二进制的任务不能分解为子任务，即任务要么全部在本地执行，要么作为一个整体卸载到MEC 服务器进行计算，并将最终的结果发送回移动设备。二进制卸载整体卸载的效率受MEC 服务器计算能力、信道容量和信道状态的影响。

- **部分卸载**：部分卸载是将任务划分为子任务的过程，即部分任务在本地处理，部分能量消耗较大或比较复杂的任务被卸载到MEC 服务器上。同时使用边缘服务器和移动设备进行计算，将两者单独计算的结果结合得到最终结果。数据的传输、能源消耗、任务数据处理、资源分配等因素影响着该过程的有效性，这些因素之间也相互影响。

- **协同卸载**： 

    这些卸载决策各有利弊，有的效率虽然高但是更复杂。如何选择卸载策略取决于用户，计算任务和无人机结构。

## 资源分配

    在多无人机多用户场景下，资源优化有以下三种。

- **计算资源分配**

        不同的计算任务对边缘服务器上的资源有不同的需求。

- **通信资源分配**

        受传输信道的影响,在复杂的MEC 通信系统中，通过对系统的通信资源进行合理分配，以最大限度的避免用户之间的相互干扰、提高传输速率，

- **计算、通信资源联合分配**

        计算、通信资源之间的权衡。

## 双层无人机卸载策略

    根据采用的TUVA-BUAV结合的双层无人机结构，底层BUAV作为一个平面，上层TUAV单独作为一个平面，形成一个类似锥形结构。海面移动终端在需要卸载时，需要根据任务的形势选择不同的无人机间卸载策略。我们分为三层来进行分析，从下往上分别是海面终端层、BUAV层和TUAV层。海面移动终端的任务产生后，首先在本地计算，如果本地的计算性能无法满足需求，会卸载到BUAV层进行处理。BUAV层由于是一个平面，保持在固定的高度，终端可以选择一个距离最近的无人机进行卸载。单BUAV可能无法满足卸载需求，则我们可以在层间进行协同卸载。如果BUAV层仍不能满足卸载需求，可以再链接上层的TUAV进行卸载任务。

# 无人机辅助MEC系统中的多用户卸载

**两个重点问题：无人机辅助边缘计算中如何卸载，无人机的轨迹设计和资源分配**

## 问题一：

    假设每个用户都有一组计算密集型任务需要处理，为了节约能耗和减少任务延迟，
用户可以选择将任务卸载到无人机进行处理。

    定义用户和无人机之间的**信道功率增益**为（视距链路主导的自由空间模型）： 

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-10-13-50-26-image.png)

    定义用户与无人机之间的**数据传输速率**为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-10-13-59-54-image.png)

    用户与无人机之间的信道增益和数据传输速率是两个主要的影响因素。

**计算模型**

    假设每个用户都有 M 个独立的任务需要执行，这些任务用集合M={1...M}来表示，定义 

lmk为用户k第m个任务的数据大小，**先考虑二进制卸载模式**akm={0,1}，akm=1表示用户k将他的第m个任务卸载给无人机处理，否则就是本地处理。

- 本地计算 

    假设fk代表了本地的计算能力，Fk表示计算每bit任务需要的CPU计算周期，用户k的任务m如果在本地的计算所需时间为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-16-25-image.png)

    则在所有M个计算任务中，考虑akm，**本地计算的总时间**可以表示为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-17-43-image.png)

    把用户k的CPU功耗建模为![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-18-22-image.png)，其中r表示与芯片有关的功耗系数，由此计算得M个计算任务采取**本地计算的总功耗**为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-19-33-image.png)

- 边缘计算

    如果选择卸载到无人机，延迟就有两部分组成，一部分是传输延迟，一部分是在机上处理的延迟，此处忽略回传的时间，因为占比较小。

    第一部分**任务传输到无人机的时间**可以表示为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-33-03-image.png)

    bk表示为系统分配给用户k的带宽，Rku是用户与无人机之间的数据传输速率。

    第二部分任务**在机上处理的时间**可以表示为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-36-48-image.png)

    其中fu表示无人机的计算能力，Fk表示计算每bit任务需要的CPU计算周期。

    考虑**卸载到无人机所需要的传输能耗**为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-42-04-image.png)

    无人机的CPU能耗建模与本地用户的相同，因此**无人机的计算总能耗**为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-42-57-image.png)

    其中fu表示无人机的计算能力，r表示与芯片有关的功耗系数。

    综上，任务完成整个卸载计算过程所需要的时间和总能耗为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-44-30-image.png)

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-15-10-45-27-image.png)

**优化问题描述**

    显然我们是一个联合优化问题，目标就是在给定的任务集合情况下，通过联合优化卸载策略Am和分配给用户的带宽B，使得系统的总能耗和所有任务完成时间加权最小化。用$\alpha$和$\beta$来表示延迟和能耗所占的权重：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-16-16-41-46-image.png)

    这些约束条件分别代表了：所有用户分得的带宽不超过系统最大带宽；用户分得的带宽不为负数；用户的卸载策略约束。

**以上的公式采用的是二进制卸载**

    若终端设备任务不可拆分则只可选择在终端设备本地执行或者完全卸载到MEC 服务器两种方式进行处理。即使终端设备任务可以拆分，但任务仍可能存在先后处理的依赖关系，因此卸载过程中对子任务的属性判断也是重要研究内容。

## 问题二：

    在海上，我们需要利用无人机的机动性，让其作为移动基站按需为物联网设备提供服务。但是无人机自身的电量和计算资源也有限，所以需要规划轨迹和资源分配。

    前提假设无人机采用**飞行-悬停-通信-计算协议**进行工作，飞行周期为T，无人机在飞行
时不与地面设备进行通信，在悬停时将以全双工模式进行工作，在上下链路中为物联网
设备收集数据。

    假设无人机在固定高度 H 飞行，t 时刻的水平坐标记为<img title="" src="file:///C:/Users/I528814/AppData/Roaming/marktext/images/2023-05-16-17-11-38-image.png" alt="" width="143">，无人机的飞行控制用速度v(t)和偏航角$\theta$(t)表示。<img src="file:///C:/Users/I528814/AppData/Roaming/marktext/images/2023-05-16-17-14-23-image.png" title="" alt="" width="269"> ，无人机的推进功率消耗和飞行速度V之间的关系为：

![](C:\Users\I528814\AppData\Roaming\marktext\images\2023-05-16-17-15-03-image.png)

    其中P0是悬停时的叶型功率，U为转子叶片的尖端速度，P和v 表示悬停条件下的感
应功率和平均转子感应速度。d0、ρ、s、A 表示与飞行阻力等相关的参数。
